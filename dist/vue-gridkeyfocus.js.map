{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-gridkeyfocus.js","webpack:///webpack/bootstrap 48cab0ef2448255e31a7","webpack:///./src/index.js","webpack:///./src/vue-gridkeyfocus.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__vue_gridkeyfocus_js__","gridKeyfocus","install","Vue","options","directive","vueGridKeyfocus","window","use","bind","el","binding","vnode","setAttribute","keyRefs","getKeyRefs","onEvn","data","attrs","onBeforeNext","onAfterNext","onBeforePrev","onAfterPrev","JSON","stringify","on","e","keyCode","stopPropagation","preventDefault","ctrlKey","tabEnterFn","curVm","theVm","nowRowData","parse","getAttribute","isFunction","focusToVm","upDownFn","componentUpdated","_ref","oldValue","vmData","undefined","unbind","document","addEventListener","element","event","handler","attachEvent","removeEventListener","nextVm","context","$refs","rowRefName","colIndex","focus","getTheRef","current","keyL","length","refObj","getRefObj","j","item","ref","cols","keyIndex","index","nextIndex","prevIndex","match","parseInt","nextOrPrevToRef","isNext","assign","next","prev","getDisabledStatus","rowRefs","disStatus","getDisabled","prefix","dataset","prefixL","refs","key","indexOf","push","substring","sort","fn","isUp","arguments","upDownToRef","theCol","fun"],"mappings":"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","file":"vue-gridkeyfocus.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gridkeyfocus\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gridkeyfocus\"] = factory();\n\telse\n\t\troot[\"gridkeyfocus\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gridkeyfocus\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gridkeyfocus\"] = factory();\n\telse\n\t\troot[\"gridkeyfocus\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vue_gridkeyfocus_js__ = __webpack_require__(1);\n //导入表格快捷键组件\nvar gridKeyfocus = {\n  install: function install(Vue, options) {\n    Vue.directive(\"gridkeyfocus\", __WEBPACK_IMPORTED_MODULE_0__vue_gridkeyfocus_js__[\"a\" /* default */]); //自定义指令 v-keyfocus\n  }\n};\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(gridKeyfocus); //会自动执行 install方法\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (gridKeyfocus); //导出\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Created by tianwenbin on 2019/1/30.\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  bind: function bind(el, binding, vnode) {\n    el.setAttribute('tabindex', -1); //给tabindex设置-1\n\n    var keyRefs = getKeyRefs(el, vnode);\n\n    //el节点上绑定的所有事件\n    var onEvn = vnode.data.attrs;\n\n    var onBeforeNext = void 0,\n        onAfterNext = void 0,\n        onBeforePrev = void 0,\n        onAfterPrev = void 0;\n    //将生成好的keyRefs帮到属性 keyrefs上\n    el.setAttribute('keyrefs', JSON.stringify(keyRefs));\n    if (onEvn) {\n      onBeforeNext = onEvn['before-next']; //顺向快捷键执行之前事件回调\n      onAfterNext = onEvn['after-next']; //顺向快捷键执行之后事件回调\n      onBeforePrev = onEvn['before-prev']; //逆向快捷键执行之前事件回调\n      onAfterPrev = onEvn['after-prev']; //逆向快捷键执行之后事件回调\n    }\n    on(el, 'keydown', function (e) {\n      //阻止默认 tab/enter/up/down\n      if (e.keyCode == 9 || e.keyCode == 13 || e.keyCode == 38 || e.keyCode == 40) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    });\n    on(el, 'keyup', function (e) {\n      var keyCode = e.keyCode;\n\n      //解决两个表格快捷键嵌套使用造成的混乱bug\n      if (keyCode == 9 || keyCode == 13 || keyCode == 38 || keyCode == 40 || e.ctrlKey && (keyCode == 9 || keyCode == 13)) {\n        e.stopPropagation();\n      }\n      //组合键 ctrl+tab / ctrl+enter\n      if (e.ctrlKey && (keyCode == 9 || keyCode == 13)) {\n        tabEnterFn(el, vnode, \"prev\", function (curVm, theVm) {\n          var nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\n          //定位前事件 若返回false 则返回\n          if (isFunction(onBeforePrev) && onBeforePrev(curVm, theVm, nowRowData, e) === false) return;\n          if (theVm == null) return; //没找到则返回\n          //焦点定位\n          focusToVm(vnode, theVm);\n          //定位后事件\n          isFunction(onAfterPrev) && onAfterPrev(theVm, nowRowData, e);\n        });\n      } else if (keyCode == 9 || keyCode == 13) {\n        //tab、enter\n        tabEnterFn(el, vnode, \"next\", function (curVm, theVm) {\n          var nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\n          //定位前事件 若返回false 则返回\n          if (isFunction(onBeforeNext) && onBeforeNext(curVm, theVm, nowRowData, e) === false) return;\n          if (theVm == null) return; //没找到则返回\n          //焦点定位\n          focusToVm(vnode, theVm);\n          //定位后事件\n          isFunction(onAfterNext) && onAfterNext(theVm, nowRowData, e);\n        });\n      } else if (keyCode == 38) {\n        upDownFn(el, vnode, true, function (curVm, theVm) {\n          var nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\n          //定位前事件 若返回false 则返回 by lhn\n          if (isFunction(onBeforePrev) && onBeforePrev(curVm, theVm, nowRowData, e) === false) return;\n          if (theVm == null) return; //没找到则返回\n          focusToVm(vnode, theVm);\n          //定位后事件by lhn\n          isFunction(onAfterPrev) && onAfterPrev(theVm, nowRowData, e);\n        });\n      } else if (keyCode == 40) {\n        //down\n        upDownFn(el, vnode, false, function (curVm, theVm) {\n          var nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\n          //定位前事件 若返回false 则返回 by lhn\n          if (isFunction(onBeforeNext) && onBeforeNext(curVm, theVm, nowRowData, e) === false) return;\n          if (theVm == null) return; //没找到则返回\n          focusToVm(vnode, theVm);\n          //定位后事件by lhn\n          isFunction(onAfterNext) && onAfterNext(theVm, nowRowData, e);\n        });\n      }\n    });\n  },\n\n  //在组件更新完成之后做操作，才能是获得的vnode准确\n  componentUpdated: function componentUpdated(el, _ref, vnode) {\n    var value = _ref.value,\n        oldValue = _ref.oldValue;\n\n    var vmData = vnode.data;\n    //设置行数据到属性 rowdata上\n    if (vmData && vmData.attrs && vmData.attrs[\"data-rowdata\"] !== undefined) {\n      el.setAttribute('rowdata', JSON.stringify(vmData.attrs[\"data-rowdata\"]));\n    }\n    if (value == oldValue) return; //没有改变就返回\n    var keyRefs = getKeyRefs(el, vnode);\n    el.setAttribute('keyrefs', JSON.stringify(keyRefs));\n  },\n  unbind: function unbind(el) {\n    //解绑\n    on(el, 'keydown');\n    on(el, 'keyup');\n  }\n});\n\n/**\r\n * 添加事件监听\r\n * @param element 要监听的元素\r\n * @param event 要监听的事件\r\n * @param handler 要执行的函数\r\n */\nvar on = function () {\n  if (document.addEventListener) {\n    // 浏览器环境，且非IE9以下版本\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false);\n      }\n    };\n  } else {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent(\"on\" + event, handler);\n      }\n    };\n  }\n}();\n/**\r\n * 移除事件监听\r\n * @param element 监听的元素\r\n * @param event 监听的事件\r\n * @param handler 执行的函数\r\n */\nvar off = function () {\n  if (document.removeEventListener) {\n    // 浏览器环境，且非IE9以下版本\n    return function (element, event, handler) {\n      if (element && event) {\n        element.removeEventListener(event, handler, false);\n      }\n    };\n  } else {\n    return function (element, event, handler) {\n      if (element && event) {\n        element.detachEvent(\"on\" + event, handler);\n      }\n    };\n  }\n}();\n\n/**\r\n * 焦点定位到某一个组件\r\n * @param nextVm  下一个需要定焦点的控件\r\n * @param vnode   容器的虚拟节点\r\n */\nvar focusToVm = function focusToVm(vnode, nextVm) {\n  vnode.context.$refs[nextVm.rowRefName][nextVm.colIndex].focus();\n};\n\n/**\r\n *\r\n * @param keyRefs\r\n * @param current\r\n * @returns {*}\r\n */\nvar getTheRef = function getTheRef(keyRefs, current) {\n  var keyL = keyRefs.length;\n  var curVm = null;\n  var refObj = getRefObj(current);\n  if (refObj === null) return null;\n  for (var j = 0; j < keyL; j++) {\n    var item = keyRefs[j];\n    if (item.ref == refObj.rowRefName && refObj.colIndex > -1 && refObj.colIndex < item.cols) {\n      curVm = refObj;\n      curVm.keyIndex = j;\n      curVm.cols = item.cols;\n      curVm.index = item.index; //by lhn\n      curVm.nextIndex = j + 1 >= keyL ? -1 : keyRefs[j + 1].index; //by lhn\n      curVm.prevIndex = j - 1 < 0 ? -1 : keyRefs[j - 1].index; //by lhn\n      break;\n    }\n  }\n  return curVm;\n};\nvar getRefObj = function getRefObj(current) {\n  // \"[\"符号的前面字符串\n  var rowRefName = current.match(/(\\S*)\\[/);\n  rowRefName = rowRefName && rowRefName[1];\n  // \"[\"与\"]\"符号的之间的字符串\n  var colIndex = current.match(/\\[([0-9]*)\\]/);\n  colIndex = colIndex && colIndex[1];\n\n  if (rowRefName === null || colIndex === null) return null;\n\n  return {\n    rowRefName: rowRefName,\n    colIndex: parseInt(colIndex)\n  };\n};\n\n/**\r\n * 对数组加一或减一的查找\r\n * @param keyRefs 快捷键的ref集合\r\n * @param curVm  当前焦点的vm\r\n * @param vnode 容器的虚拟节点\r\n * @param isNext 是否顺向查找 (next/prev)\r\n * @returns {*}\r\n */\nvar nextOrPrevToRef = function nextOrPrevToRef(keyRefs, curVm, vnode, isNext) {\n  var keyL = keyRefs.length;\n  var theVm = Object.assign({}, curVm);\n  delete theVm.nextIndex;\n  delete theVm.prevIndex;\n  if (isNext === \"next\") {\n    //当前个就是最后一个了\n    if (curVm.colIndex + 1 >= keyRefs[curVm.keyIndex].cols) {\n      //已经到达最后一行了\n      if (curVm.keyIndex + 1 >= keyL) {\n        return null;\n      } else {\n        var next = keyRefs[curVm.keyIndex + 1];\n        theVm.rowRefName = next.ref;\n        theVm.cols = next.cols;\n        theVm.colIndex = 0;\n        theVm.keyIndex = curVm.keyIndex + 1;\n        theVm.index = next.index; //by lhn\n      }\n    } else {\n      theVm.colIndex = curVm.colIndex + 1;\n    }\n  } else {\n    //当前个是在第一列了\n    if (curVm.colIndex <= 0) {\n      //已经到达第一行了\n      if (curVm.keyIndex <= 0) {\n        return null;\n      } else {\n        var prev = keyRefs[curVm.keyIndex - 1];\n        theVm.rowRefName = prev.ref;\n        theVm.cols = prev.cols;\n        theVm.colIndex = prev.cols - 1;\n        theVm.keyIndex = curVm.keyIndex - 1;\n        theVm.index = prev.index; //by lhn\n      }\n    } else {\n      theVm.colIndex = curVm.colIndex - 1;\n    }\n  }\n  if (getDisabledStatus(vnode, theVm)) {\n    theVm = nextOrPrevToRef(keyRefs, theVm, vnode, isNext);\n  }\n  return theVm;\n};\n\n/**\r\n * 判断某一组件是否可以编辑的状态\r\n * return true 代表不能编辑 return false 代表可以编辑\r\n * @param vnode     容器的虚拟节点\r\n * @param theVm   ref的名称\r\n * @returns {boolean}\r\n */\nvar getDisabledStatus = function getDisabledStatus(vnode, theVm) {\n  var rowRefs = vnode.context.$refs[theVm.rowRefName];\n  if (!rowRefs || !rowRefs[theVm.colIndex]) return true;\n  //若存在disabled属性 则也返回true\n  var disabled = rowRefs[theVm.colIndex].getAttribute && rowRefs[theVm.colIndex].getAttribute(\"disabled\");\n  if (disabled) return true;\n  var disStatus = rowRefs[theVm.colIndex].getDisabled;\n  return disStatus && disStatus() === true ? true : false;\n};\n\n/**\r\n * 通过vnode的$refs 拼接keyRefs\r\n * @param el   用于获取前缀\r\n * @param vnode\r\n * @returns {Array}\r\n */\nvar getKeyRefs = function getKeyRefs(el, vnode) {\n  var prefix = el.dataset.prefix || \"keyRef_\"; //前缀属性 默认前缀 keyRef\n  var prefixL = prefix.length;\n  var keyRefs = [];\n  var refs = vnode.context.$refs;\n  for (var key in refs) {\n    //匹配跟前缀prefix相同的属性\n    if (refs.hasOwnProperty(key) && key.indexOf(prefix) === 0 && refs[key].length) {\n      keyRefs.push({ ref: key, cols: refs[key].length, index: parseInt(key.substring(prefixL)) });\n    }\n  }\n  keyRefs.sort(function (item, index, c) {\n    if (item.index < index.index) {\n      return -1;\n    } else if (item.index > index.index) {\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n  return keyRefs;\n};\n\n//快捷键切换的方法tab/enter\nvar tabEnterFn = function tabEnterFn(el, vnode, isNext, fn) {\n  var keyRefs = JSON.parse(el.getAttribute(\"keyRefs\"));\n  var current = el.dataset.current; //当前焦点聚集的ref名称；\n  //找到当前焦点所在的vm (不可编辑时没有焦点的)\n  var curVm = getTheRef(keyRefs, current);\n  //若没有找到当前的 则返回null;\n  if (curVm === null) return null;\n\n  var theVm = nextOrPrevToRef(keyRefs, curVm, vnode, isNext);\n  if (isFunction(fn)) {\n    fn(curVm, theVm);\n  }\n};\n//快捷键切换的方法 up/down\nvar upDownFn = function upDownFn(el, vnode) {\n  var isUp = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var fn = arguments[3];\n\n  var keyRefs = JSON.parse(el.getAttribute(\"keyRefs\"));\n  var current = el.dataset.current; //当前焦点聚集的ref名称；\n  //找到当前焦点所在的vm (不可编辑时没有焦点的)\n  var curVm = getTheRef(keyRefs, current);\n  //若没有找到当前的 则返回null;\n  if (curVm === null) return null;\n\n  var theVm = upDownToRef(keyRefs, curVm, vnode, isUp);\n  if (isFunction(fn)) {\n    fn(curVm, theVm);\n  }\n};\n\n//快捷键切换的方法 up/down 获取上下行的组件\nvar upDownToRef = function upDownToRef(keyRefs, curVm, vnode) {\n  var isUp = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n  var keyL = keyRefs.length;\n  var theVm = Object.assign({}, curVm); //浅拷贝\n  delete theVm.nextIndex;\n  delete theVm.prevIndex;\n  if (isUp) {\n    //up\n    if (curVm.keyIndex <= 0) {\n      //到达第一行\n      return null;\n    } else {\n      var prev = keyRefs[curVm.keyIndex - 1];\n      //上一行没有那么多可以编辑的，则定位到上一行最后一个可以编辑的\n      var theCol = curVm.colIndex >= prev.cols ? prev.cols - 1 : curVm.colIndex;\n      theVm.rowRefName = prev.ref;\n      theVm.cols = prev.cols;\n      theVm.colIndex = theCol;\n      theVm.keyIndex = curVm.keyIndex - 1;\n      theVm.index = prev.index; //by lhn\n    }\n  } else {\n    //down\n    if (curVm.keyIndex >= keyL - 1) {\n      //到达可以编辑的最后一行\n      return null;\n    } else {\n      var next = keyRefs[curVm.keyIndex + 1];\n      //上一行没有那么多可以编辑的，则定位到上一行最后一个可以编辑的\n      var _theCol = curVm.colIndex >= next.cols ? next.cols - 1 : curVm.colIndex;\n      theVm.rowRefName = next.ref;\n      theVm.cols = next.cols;\n      theVm.colIndex = _theCol;\n      theVm.keyIndex = curVm.keyIndex + 1;\n      theVm.index = next.index; //by lhn\n    }\n  }\n  if (getDisabledStatus(vnode, theVm)) {\n    // by lhn\n    if (isUp) {\n      theVm = nextOrPrevToRef(keyRefs, curVm, vnode, \"prev\");\n    } else {\n      theVm = nextOrPrevToRef(keyRefs, theVm, vnode, \"next\");\n    }\n  }\n  return theVm;\n};\n\n//判断是否是函数\nvar isFunction = function isFunction(fun) {\n  return typeof fun === \"function\";\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vue-gridkeyfocus.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 48cab0ef2448255e31a7","import vueGridKeyfocus from \"./vue-gridkeyfocus.js\";//导入表格快捷键组件\r\nconst gridKeyfocus = {\r\n  install(Vue,options){\r\n    Vue.directive(\"gridkeyfocus\", vueGridKeyfocus);//自定义指令 v-keyfocus\r\n  }\r\n};\r\nif(typeof  window !== 'undefined' && window.Vue){\r\n  window.Vue.use(gridKeyfocus);//会自动执行 install方法\r\n}\r\nexport default gridKeyfocus;//导出\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\r\n * Created by tianwenbin on 2019/1/30.\r\n */\r\n\r\nexport default {\r\n\r\n  bind(el,binding,vnode){\r\n    el.setAttribute('tabindex',-1);//给tabindex设置-1\r\n\r\n    let keyRefs = getKeyRefs(el,vnode);\r\n\r\n    //el节点上绑定的所有事件\r\n    const onEvn = vnode.data.attrs;\r\n\r\n    let onBeforeNext,onAfterNext,onBeforePrev,onAfterPrev;\r\n    //将生成好的keyRefs帮到属性 keyrefs上\r\n    el.setAttribute('keyrefs',JSON.stringify(keyRefs));\r\n    if(onEvn){\r\n      onBeforeNext = onEvn['before-next'];//顺向快捷键执行之前事件回调\r\n      onAfterNext = onEvn['after-next'];//顺向快捷键执行之后事件回调\r\n      onBeforePrev = onEvn['before-prev'];//逆向快捷键执行之前事件回调\r\n      onAfterPrev = onEvn['after-prev'];//逆向快捷键执行之后事件回调\r\n    }\r\n    on(el,'keydown',function(e){\r\n      //阻止默认 tab/enter/up/down\r\n      if(e.keyCode==9 || e.keyCode==13 || e.keyCode == 38 || e.keyCode == 40){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      }\r\n    });\r\n    on(el,'keyup',function(e){\r\n      var keyCode = e.keyCode;\r\n\r\n      //解决两个表格快捷键嵌套使用造成的混乱bug\r\n      if(keyCode==9 || keyCode==13 || keyCode == 38 || keyCode == 40 || (e.ctrlKey && (keyCode == 9 || keyCode == 13))){\r\n        e.stopPropagation();\r\n      }\r\n      //组合键 ctrl+tab / ctrl+enter\r\n      if(e.ctrlKey && (keyCode == 9 || keyCode == 13)){\r\n        tabEnterFn(el,vnode,\"prev\",function(curVm,theVm){\r\n          let nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\r\n          //定位前事件 若返回false 则返回\r\n          if(isFunction(onBeforePrev) && onBeforePrev(curVm,theVm,nowRowData,e)===false) return;\r\n          if(theVm==null) return; //没找到则返回\r\n          //焦点定位\r\n          focusToVm(vnode,theVm);\r\n          //定位后事件\r\n          isFunction(onAfterPrev) && onAfterPrev(theVm,nowRowData,e);\r\n        });\r\n\r\n      }else if(keyCode == 9 || keyCode == 13){//tab、enter\r\n        tabEnterFn(el,vnode,\"next\",function(curVm,theVm){\r\n          let nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\r\n          //定位前事件 若返回false 则返回\r\n          if(isFunction(onBeforeNext) && onBeforeNext(curVm,theVm,nowRowData,e)===false) return;\r\n          if(theVm==null) return; //没找到则返回\r\n          //焦点定位\r\n          focusToVm(vnode,theVm);\r\n          //定位后事件\r\n          isFunction(onAfterNext) && onAfterNext(theVm,nowRowData,e);\r\n        });\r\n      }else if(keyCode ==38){\r\n        upDownFn(el,vnode,true,function(curVm,theVm){\r\n          let nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\r\n          //定位前事件 若返回false 则返回 by lhn\r\n          if(isFunction(onBeforePrev) && onBeforePrev(curVm,theVm,nowRowData,e)===false) return;\r\n          if(theVm==null) return; //没找到则返回\r\n          focusToVm(vnode,theVm);\r\n          //定位后事件by lhn\r\n          isFunction(onAfterPrev) && onAfterPrev(theVm,nowRowData,e);\r\n        });\r\n      }else if(keyCode == 40){//down\r\n        upDownFn(el,vnode,false,function(curVm,theVm){\r\n          let nowRowData = JSON.parse(el.getAttribute(\"rowdata\"));\r\n          //定位前事件 若返回false 则返回 by lhn\r\n          if(isFunction(onBeforeNext) && onBeforeNext(curVm,theVm,nowRowData,e)===false) return;\r\n          if(theVm==null) return; //没找到则返回\r\n          focusToVm(vnode,theVm);\r\n          //定位后事件by lhn\r\n          isFunction(onAfterNext) && onAfterNext(theVm,nowRowData,e);\r\n        });\r\n      }\r\n    });\r\n  },\r\n  //在组件更新完成之后做操作，才能是获得的vnode准确\r\n  componentUpdated(el,{value,oldValue},vnode){\r\n    let vmData = vnode.data;\r\n    //设置行数据到属性 rowdata上\r\n    if(vmData && vmData.attrs && vmData.attrs[\"data-rowdata\"] !== undefined){\r\n      el.setAttribute('rowdata',JSON.stringify(vmData.attrs[\"data-rowdata\"]));\r\n    }\r\n    if(value == oldValue) return;  //没有改变就返回\r\n    let keyRefs = getKeyRefs(el,vnode);\r\n    el.setAttribute('keyrefs',JSON.stringify(keyRefs));\r\n  },\r\n  unbind(el){\r\n    //解绑\r\n    on(el,'keydown');\r\n    on(el,'keyup');\r\n  }\r\n}\r\n\r\n/**\r\n * 添加事件监听\r\n * @param element 要监听的元素\r\n * @param event 要监听的事件\r\n * @param handler 要执行的函数\r\n */\r\nconst on = (function () {\r\n  if (document.addEventListener) {// 浏览器环境，且非IE9以下版本\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false);\r\n      }\r\n    }\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent(\"on\" + event, handler);\r\n      }\r\n    }\r\n  }\r\n})();\r\n/**\r\n * 移除事件监听\r\n * @param element 监听的元素\r\n * @param event 监听的事件\r\n * @param handler 执行的函数\r\n */\r\nconst off = (function () {\r\n  if (document.removeEventListener) {// 浏览器环境，且非IE9以下版本\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false);\r\n      }\r\n    }\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.detachEvent(\"on\" + event, handler);\r\n      }\r\n    }\r\n  }\r\n})();\r\n\r\n/**\r\n * 焦点定位到某一个组件\r\n * @param nextVm  下一个需要定焦点的控件\r\n * @param vnode   容器的虚拟节点\r\n */\r\nconst focusToVm = function (vnode,nextVm) {\r\n  vnode.context.$refs[nextVm.rowRefName][nextVm.colIndex].focus();\r\n};\r\n\r\n/**\r\n *\r\n * @param keyRefs\r\n * @param current\r\n * @returns {*}\r\n */\r\nconst getTheRef = function(keyRefs,current){\r\n  let keyL = keyRefs.length;\r\n  let curVm = null;\r\n  let refObj = getRefObj(current);\r\n  if(refObj === null) return null;\r\n  for(let j=0; j<keyL; j++){\r\n    let item = keyRefs[j];\r\n    if(item.ref == refObj.rowRefName && refObj.colIndex>-1 && refObj.colIndex<item.cols){\r\n      curVm = refObj;\r\n      curVm.keyIndex = j;\r\n      curVm.cols = item.cols;\r\n      curVm.index=item.index;//by lhn\r\n      curVm.nextIndex=j+1>=keyL?-1:keyRefs[j+1].index;//by lhn\r\n      curVm.prevIndex=j-1<0?-1:keyRefs[j-1].index;//by lhn\r\n      break;\r\n    }\r\n  }\r\n  return curVm;\r\n};\r\nconst getRefObj = function(current){\r\n  // \"[\"符号的前面字符串\r\n  let rowRefName = current.match(/(\\S*)\\[/);\r\n  rowRefName = rowRefName && rowRefName[1];\r\n  // \"[\"与\"]\"符号的之间的字符串\r\n  let colIndex = current.match(/\\[([0-9]*)\\]/);\r\n  colIndex = colIndex && colIndex[1];\r\n\r\n  if(rowRefName === null || colIndex === null) return null;\r\n\r\n  return {\r\n    rowRefName:rowRefName,\r\n    colIndex:parseInt(colIndex)\r\n  }\r\n};\r\n\r\n/**\r\n * 对数组加一或减一的查找\r\n * @param keyRefs 快捷键的ref集合\r\n * @param curVm  当前焦点的vm\r\n * @param vnode 容器的虚拟节点\r\n * @param isNext 是否顺向查找 (next/prev)\r\n * @returns {*}\r\n */\r\nconst nextOrPrevToRef = function(keyRefs,curVm,vnode,isNext){\r\n  let keyL = keyRefs.length;\r\n  let theVm = Object.assign({},curVm);\r\n  delete theVm.nextIndex;\r\n  delete theVm.prevIndex;\r\n  if(isNext===\"next\"){\r\n    //当前个就是最后一个了\r\n    if(curVm.colIndex+1 >= keyRefs[curVm.keyIndex].cols){\r\n      //已经到达最后一行了\r\n      if(curVm.keyIndex+1 >= keyL){\r\n        return null;\r\n      }else {\r\n        let next=keyRefs[curVm.keyIndex+1];\r\n        theVm.rowRefName = next.ref;\r\n        theVm.cols = next.cols;\r\n        theVm.colIndex = 0;\r\n        theVm.keyIndex = curVm.keyIndex+1;\r\n        theVm.index=next.index;//by lhn\r\n      }\r\n    }else {\r\n      theVm.colIndex = curVm.colIndex+1;\r\n\r\n    }\r\n\r\n  }else {\r\n    //当前个是在第一列了\r\n    if(curVm.colIndex<=0){\r\n      //已经到达第一行了\r\n      if(curVm.keyIndex <= 0){\r\n        return null;\r\n      }else {\r\n        let prev=keyRefs[curVm.keyIndex-1]\r\n        theVm.rowRefName = prev.ref;\r\n        theVm.cols = prev.cols;\r\n        theVm.colIndex = prev.cols-1;\r\n        theVm.keyIndex = curVm.keyIndex-1;\r\n        theVm.index=prev.index;//by lhn\r\n      }\r\n    }else {\r\n      theVm.colIndex = curVm.colIndex-1;\r\n    }\r\n\r\n  }\r\n  if(getDisabledStatus(vnode,theVm)){\r\n    theVm = nextOrPrevToRef(keyRefs,theVm,vnode,isNext);\r\n  }\r\n  return theVm;\r\n};\r\n\r\n/**\r\n * 判断某一组件是否可以编辑的状态\r\n * return true 代表不能编辑 return false 代表可以编辑\r\n * @param vnode     容器的虚拟节点\r\n * @param theVm   ref的名称\r\n * @returns {boolean}\r\n */\r\nconst getDisabledStatus = function(vnode,theVm){\r\n  let rowRefs = vnode.context.$refs[theVm.rowRefName];\r\n  if(!rowRefs || !rowRefs[theVm.colIndex]) return true;\r\n  //若存在disabled属性 则也返回true\r\n  let disabled = rowRefs[theVm.colIndex].getAttribute && rowRefs[theVm.colIndex].getAttribute(\"disabled\");\r\n  if(disabled) return true;\r\n  let disStatus = rowRefs[theVm.colIndex].getDisabled;\r\n  return (disStatus && disStatus()===true) ? true : false;\r\n};\r\n\r\n/**\r\n * 通过vnode的$refs 拼接keyRefs\r\n * @param el   用于获取前缀\r\n * @param vnode\r\n * @returns {Array}\r\n */\r\nconst getKeyRefs = function(el,vnode){\r\n  let prefix = el.dataset.prefix || \"keyRef_\"; //前缀属性 默认前缀 keyRef\r\n  let prefixL=prefix.length;\r\n  let keyRefs=[];\r\n  let refs = vnode.context.$refs;\r\n  for(let key in refs){\r\n    //匹配跟前缀prefix相同的属性\r\n    if(refs.hasOwnProperty(key) && key.indexOf(prefix)===0 && refs[key].length){\r\n      keyRefs.push({ref:key,cols:refs[key].length,index:parseInt(key.substring(prefixL))});\r\n    }\r\n  }\r\n  keyRefs.sort(function(item,index,c){\r\n    if(item.index < index.index){\r\n      return -1;\r\n    }else if(item.index > index.index){\r\n      return 1;\r\n    }else {\r\n      return 0;\r\n    }\r\n  });\r\n  return keyRefs;\r\n};\r\n\r\n//快捷键切换的方法tab/enter\r\nconst tabEnterFn = function(el,vnode,isNext,fn){\r\n  let keyRefs = JSON.parse(el.getAttribute(\"keyRefs\"));\r\n  let current = el.dataset.current; //当前焦点聚集的ref名称；\r\n  //找到当前焦点所在的vm (不可编辑时没有焦点的)\r\n  let curVm = getTheRef(keyRefs,current);\r\n  //若没有找到当前的 则返回null;\r\n  if(curVm === null) return null;\r\n\r\n  let theVm = nextOrPrevToRef(keyRefs,curVm,vnode,isNext);\r\n  if(isFunction(fn)){\r\n    fn(curVm,theVm);\r\n  }\r\n};\r\n//快捷键切换的方法 up/down\r\nconst upDownFn = function(el,vnode,isUp=true,fn){\r\n  let keyRefs = JSON.parse(el.getAttribute(\"keyRefs\"));\r\n  let current = el.dataset.current; //当前焦点聚集的ref名称；\r\n  //找到当前焦点所在的vm (不可编辑时没有焦点的)\r\n  let curVm = getTheRef(keyRefs,current);\r\n  //若没有找到当前的 则返回null;\r\n  if(curVm === null) return null;\r\n\r\n  let theVm = upDownToRef(keyRefs,curVm,vnode,isUp);\r\n  if(isFunction(fn)){\r\n    fn(curVm,theVm);\r\n  }\r\n};\r\n\r\n//快捷键切换的方法 up/down 获取上下行的组件\r\nconst upDownToRef = function(keyRefs,curVm,vnode,isUp=true){\r\n  let keyL = keyRefs.length;\r\n  let theVm = Object.assign({},curVm);//浅拷贝\r\n  delete theVm.nextIndex;\r\n  delete theVm.prevIndex;\r\n  if(isUp){//up\r\n    if(curVm.keyIndex<=0){//到达第一行\r\n      return null;\r\n    }else {\r\n      let prev=keyRefs[curVm.keyIndex-1];\r\n      //上一行没有那么多可以编辑的，则定位到上一行最后一个可以编辑的\r\n      let theCol = curVm.colIndex>=prev.cols ? prev.cols - 1 : curVm.colIndex;\r\n      theVm.rowRefName = prev.ref;\r\n      theVm.cols = prev.cols;\r\n      theVm.colIndex = theCol;\r\n      theVm.keyIndex = curVm.keyIndex-1;\r\n      theVm.index=prev.index;//by lhn\r\n    }\r\n  }else { //down\r\n    if(curVm.keyIndex>=keyL-1){//到达可以编辑的最后一行\r\n      return null;\r\n    }else {\r\n      let next=keyRefs[curVm.keyIndex+1]\r\n      //上一行没有那么多可以编辑的，则定位到上一行最后一个可以编辑的\r\n      let theCol = curVm.colIndex>=next.cols ? next.cols - 1 : curVm.colIndex;\r\n      theVm.rowRefName = next.ref;\r\n      theVm.cols = next.cols;\r\n      theVm.colIndex = theCol;\r\n      theVm.keyIndex = curVm.keyIndex+1;\r\n      theVm.index=next.index;//by lhn\r\n    }\r\n  }\r\n  if(getDisabledStatus(vnode,theVm)){// by lhn\r\n    if(isUp){\r\n      theVm = nextOrPrevToRef(keyRefs,curVm,vnode,\"prev\");\r\n    }else{\r\n      theVm = nextOrPrevToRef(keyRefs,theVm,vnode,\"next\");\r\n    }\r\n\r\n  }\r\n  return theVm;\r\n};\r\n\r\n//判断是否是函数\r\nconst isFunction = function(fun){\r\n  return typeof fun === \"function\";\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/vue-gridkeyfocus.js"],"sourceRoot":""}