!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("gridkeyfocus",[],n):"object"==typeof exports?exports.gridkeyfocus=n():e.gridkeyfocus=n()}("undefined"!=typeof self?self:this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="/dist/",n(n.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o={install:function(e,n){e.directive("gridkeyfocus",r.a)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),n.default=o},function(e,n,t){"use strict";n.a={bind:function(e,n,t){e.setAttribute("tabindex",-1);var d=a(e,t),i=t.data.attrs,u=void 0,l=void 0,s=void 0,v=void 0;e.setAttribute("keyrefs",JSON.stringify(d)),i&&(u=i["before-next"],l=i["after-next"],s=i["before-prev"],v=i["after-prev"]),r(e,"keydown",function(e){9!=e.keyCode&&13!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode||(e.stopPropagation(),e.preventDefault())}),r(e,"keyup",function(n){var r=n.keyCode;(9==r||13==r||38==r||40==r||n.ctrlKey&&(9==r||13==r))&&n.stopPropagation(),!n.ctrlKey||9!=r&&13!=r?9==r||13==r?f(e,t,"next",function(r,d){var i=JSON.parse(e.getAttribute("rowdata"));x(u)&&!1===u(r,d,i,n)||null!=d&&(o(t,d),x(l)&&l(d,i,n))}):38==r?c(e,t,!0,function(r,d){var i=JSON.parse(e.getAttribute("rowdata"));x(s)&&!1===s(r,d,i,n)||null!=d&&(o(t,d),x(v)&&v(d,i,n))}):40==r&&c(e,t,!1,function(r,d){var i=JSON.parse(e.getAttribute("rowdata"));x(u)&&!1===u(r,d,i,n)||null!=d&&(o(t,d),x(l)&&l(d,i,n))}):f(e,t,"prev",function(r,d){var i=JSON.parse(e.getAttribute("rowdata"));x(s)&&!1===s(r,d,i,n)||null!=d&&(o(t,d),x(v)&&v(d,i,n))})})},componentUpdated:function(e,n,t){var r=n.value,o=n.oldValue,d=t.data;if(d&&d.attrs&&void 0!==d.attrs["data-rowdata"]&&e.setAttribute("rowdata",JSON.stringify(d.attrs["data-rowdata"])),r!=o){var i=a(e,t);e.setAttribute("keyrefs",JSON.stringify(i))}},unbind:function(e){r(e,"keydown"),r(e,"keyup")}};var r=function(){return document.addEventListener?function(e,n,t){e&&n&&t&&e.addEventListener(n,t,!1)}:function(e,n,t){e&&n&&t&&e.attachEvent("on"+n,t)}}(),o=(function(){document.removeEventListener}(),function(e,n){e.context.$refs[n.rowRefName][n.colIndex].focus()}),d=function(e,n){var t=e.length,r=null,o=i(n);if(null===o)return null;for(var d=0;d<t;d++){var u=e[d];if(u.ref==o.rowRefName&&o.colIndex>-1&&o.colIndex<u.cols){r=o,r.keyIndex=d,r.cols=u.cols,r.index=u.index,r.nextIndex=d+1>=t?-1:e[d+1].index,r.prevIndex=d-1<0?-1:e[d-1].index;break}}return r},i=function(e){var n=e.match(/(\S*)\[/);n=n&&n[1];var t=e.match(/\[([0-9]*)\]/);return t=t&&t[1],null===n||null===t?null:{rowRefName:n,colIndex:parseInt(t)}},u=function e(n,t,r,o){var d=n.length,i=Object.assign({},t);if(delete i.nextIndex,delete i.prevIndex,"next"===o)if(t.colIndex+1>=n[t.keyIndex].cols){if(t.keyIndex+1>=d)return null;var u=n[t.keyIndex+1];i.rowRefName=u.ref,i.cols=u.cols,i.colIndex=0,i.keyIndex=t.keyIndex+1,i.index=u.index}else i.colIndex=t.colIndex+1;else if(t.colIndex<=0){if(t.keyIndex<=0)return null;var a=n[t.keyIndex-1];i.rowRefName=a.ref,i.cols=a.cols,i.colIndex=a.cols-1,i.keyIndex=t.keyIndex-1,i.index=a.index}else i.colIndex=t.colIndex-1;return l(r,i)&&(i=e(n,i,r,o)),i},l=function(e,n){var t=e.context.$refs[n.rowRefName];if(!t||!t[n.colIndex])return!0;if(t[n.colIndex].getAttribute&&t[n.colIndex].getAttribute("disabled"))return!0;var r=t[n.colIndex].getDisabled;return!(!r||!0!==r())},a=function(e,n){var t=e.dataset.prefix||"keyRef_",r=t.length,o=[],d=n.context.$refs;for(var i in d)d.hasOwnProperty(i)&&0===i.indexOf(t)&&d[i].length&&o.push({ref:i,cols:d[i].length,index:parseInt(i.substring(r))});return o.sort(function(e,n,t){return e.index<n.index?-1:e.index>n.index?1:0}),o},f=function(e,n,t,r){var o=JSON.parse(e.getAttribute("keyRefs")),i=e.dataset.current,l=d(o,i);if(null===l)return null;var a=u(o,l,n,t);x(r)&&r(l,a)},c=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments[3],o=JSON.parse(e.getAttribute("keyRefs")),i=e.dataset.current,u=d(o,i);if(null===u)return null;var l=s(o,u,n,t);x(r)&&r(u,l)},s=function(e,n,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.length,d=Object.assign({},n);if(delete d.nextIndex,delete d.prevIndex,r){if(n.keyIndex<=0)return null;var i=e[n.keyIndex-1],a=n.colIndex>=i.cols?i.cols-1:n.colIndex;d.rowRefName=i.ref,d.cols=i.cols,d.colIndex=a,d.keyIndex=n.keyIndex-1,d.index=i.index}else{if(n.keyIndex>=o-1)return null;var f=e[n.keyIndex+1],c=n.colIndex>=f.cols?f.cols-1:n.colIndex;d.rowRefName=f.ref,d.cols=f.cols,d.colIndex=c,d.keyIndex=n.keyIndex+1,d.index=f.index}return l(t,d)&&(d=r?u(e,n,t,"prev"):u(e,d,t,"next")),d},x=function(e){return"function"==typeof e}}])});
//# sourceMappingURL=vue-gridkeyfocus.js.map